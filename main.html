<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Montage Lab</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;600;700&display=swap');
        body { margin: 0; font-family: 'Montserrat', sans-serif; }
        .glass-card { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); backdrop-filter: blur(8px); border: 1px solid rgba(255,255,255,0.04); }
        .radial-gradient-custom {
          background-image: radial-gradient(circle at center, rgba(124, 92, 255, 0.1) 0%, rgba(11, 15, 26, 0.5) 50%, rgba(11, 15, 26, 1) 100%);
        }
        .header-bg::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          background: linear-gradient(to right, #00F5A0, #7C5CFF);
          transition: width 0.5s ease-in-out;
        }
        .header-bg:hover::before {
          width: 100%;
        }
        .header-content {
          position: relative;
          z-index: 1;
        }
        .corner-border {
          position: absolute;
          width: 15px;
          height: 15px;
          border-color: #00F5A0;
          border-style: solid;
          transition: opacity 0.3s ease-out;
          opacity: 1;
        }
        .top-left { top: 0; left: 0; border-width: 2px 0 0 2px; }
        .top-right { top: 0; right: 0; border-width: 2px 2px 0 0; }
        .bottom-left { bottom: 0; left: 0; border-width: 0 0 2px 2px; }
        .bottom-right { bottom: 0; right: 0; border-width: 0 2px 2px 0; }
        .hide-on-scroll { opacity: 0; }
    </style>
</head>
<body class="min-h-screen bg-[#0B0F1A] text-white relative overflow-x-hidden">

    <!-- Radial Gradient Background -->
    <div class="absolute inset-0 z-0 radial-gradient-custom"></div>

    <!-- Scrolling Lines Background Canvas -->
    <canvas id="scrolling-abstraction" class="absolute inset-0 w-full h-full z-0"></canvas>

    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 backdrop-blur-sm bg-black bg-opacity-30 border-b border-gray-800 transition-all duration-300">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-gradient-to-tr from-[#00F5A0] to-[#7C5CFF] rounded-full flex items-center justify-center">
                    <span class="sr-only">–õ–æ–≥–æ—Ç–∏–ø</span>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="white" stroke-opacity="0.15" /></svg>
                </div>
                <strong class="text-sm font-semibold font-['Montserrat']">MONTAGE LAB</strong>
            </div>
            <nav>
                <button onclick="document.getElementById('form-main').scrollIntoView({ behavior: 'smooth' })" class="ml-4 inline-flex items-center gap-2 bg-gradient-to-r from-[#00F5A0] to-[#7C5CFF] text-black px-4 py-2 rounded-2xl shadow-lg text-sm font-semibold font-['Montserrat'] hover:opacity-80 transition" aria-label="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è">
                    –ó–∞–ø–∏—Å–∞—Ç—å—Å—è ‚Äî –º–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã
                </button>
            </nav>
        </div>
    </header>

    <main class="pt-28 relative z-10">
        <!-- Hero Section -->
        <section class="max-w-6xl mx-auto px-4 py-12 lg:py-20 flex flex-col items-center relative">
            <div class="max-w-3xl text-center relative z-10">
                <h1 class="text-4xl md:text-5xl lg:text-[64px] leading-tight font-['Playfair Display'] font-bold relative inline-block overflow-hidden header-bg">
                    <span class="header-content">–°–¢–ê–ù–¨ –ú–û–ù–¢–ê–ñ–Å–†–û–ú, –ö–û–¢–û–†–´–ô –ü–†–û–î–ê–Å–¢.</span>
                </h1>
                <p class="mt-4 text-xl text-gray-400 font-['Montserrat'] leading-relaxed">–ü—Ä–∞–∫—Ç–∏–∫–∞, —Ñ–∞–π–ª—ã –∏ —Ä–µ–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫ ‚Äî –æ—Ç –Ω—É–ª—è –¥–æ PRO –∑–∞ X –Ω–µ–¥–µ–ª—å.</p>
                <div class="mt-6 flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="document.getElementById('form-main').scrollIntoView({ behavior: 'smooth' })" class="px-6 py-3 rounded-2xl font-semibold font-['Montserrat'] bg-[#00F5A0] text-black shadow-lg transform hover:-translate-y-1 transition" aria-label="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è">
                        –ó–∞–ø–∏—Å–∞—Ç—å—Å—è ‚Äî –º–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã
                    </button>
                </div>
                <div class="mt-8 grid grid-cols-3 gap-4">
                    <div class="flex flex-col items-start gap-2">
                        <div class="w-10 h-10 rounded-lg flex items-center justify-center bg-white bg-opacity-5">‚ö°</div>
                        <div class="text-base font-semibold font-['Montserrat']">–ë—ã—Å—Ç—Ä–æ</div>
                        <div class="text-sm text-gray-400 font-['Montserrat']">–∫—É—Ä—Å—ã —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ</div>
                    </div>
                    <div class="flex flex-col items-start gap-2">
                        <div class="w-10 h-10 rounded-lg flex items-center justify-center bg-white bg-opacity-5">üé¨</div>
                        <div class="text-base font-semibold font-['Montserrat']">–ü—Ä–∞–∫—Ç–∏–∫–∞</div>
                        <div class="text-sm text-gray-400 font-['Montserrat']">—Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –∏ –ø—Ä–æ–µ–∫—Ç—ã</div>
                    </div>
                    <div class="flex flex-col items-start gap-2">
                        <div class="w-10 h-10 rounded-lg flex items-center justify-center bg-white bg-opacity-5">üíº</div>
                        <div class="text-base font-semibold font-['Montserrat']">–¢—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</div>
                        <div class="text-sm text-gray-400 font-['Montserrat']">–ø–æ–º–æ—â—å –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Courses Section -->
        <section class="bg-white bg-opacity-[0.02] py-12">
            <div class="max-w-6xl mx-auto px-4">
                <h2 class="text-2xl mb-6 font-semibold font-['Playfair Display']">–ö—É—Ä—Å—ã</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-6 rounded-2xl border border-gray-800 bg-gradient-to-br from-[#1A1A3A] to-[#3B2C68]">
                        <div class="flex items-center justify-between">
                            <h4 class="text-lg font-semibold font-['Montserrat']">–ë–ê–ó–ê</h4>
                            <div class="text-sm text-gray-400 font-['Montserrat']">6 –Ω–µ–¥–µ–ª—å</div>
                        </div>
                        <ul class="mt-3 text-sm space-y-1 font-['Montserrat']">
                            <li>‚Ä¢ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–∞–±–æ—á–∏–µ –ø–∞–Ω–µ–ª–∏</li>
                            <li>‚Ä¢ –ú–æ–Ω—Ç–∞–∂ –ø–æ–¥ —Å–æ—Ü—Å–µ—Ç–∏</li>
                            <li>‚Ä¢ –¢–∞–π–º–ª–∞–π–Ω –∏ cuts</li>
                            <li>‚Ä¢ –¶–≤–µ—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—è ‚Äî –±–∞–∑–æ–≤—ã–π</li>
                            <li>‚Ä¢ –≠–∫—Å–ø–æ—Ä—Ç –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</li>
                        </ul>
                        <div class="mt-4 flex items-center justify-between">
                            <div class="text-xl font-semibold font-['Montserrat']">–æ—Ç 9 990 ‚ÇΩ</div>
                            <button class="px-4 py-2 rounded-lg bg-[#00F5A0] text-black font-['Montserrat'] hover:bg-[#00e390] transition">
                                –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                            </button>
                        </div>
                    </div>
                    <div class="p-6 rounded-2xl border border-gray-800 bg-gradient-to-br from-[#123A25] to-[#2C685B]">
                        <div class="flex items-center justify-between">
                            <h4 class="text-lg font-semibold font-['Montserrat']">–ü–†–û</h4>
                            <div class="text-sm text-gray-400 font-['Montserrat']">12 –Ω–µ–¥–µ–ª—å</div>
                        </div>
                        <ul class="mt-3 text-sm space-y-1 font-['Montserrat']">
                            <li>‚Ä¢ –°–ª–æ–∂–Ω—ã–π –º–æ–Ω—Ç–∞–∂</li>
                            <li>‚Ä¢ VFX –ø—Ä–∏—ë–º—ã</li>
                            <li>‚Ä¢ –†–∞–±–æ—Ç–∞ —Å–æ –∑–≤—É–∫–æ–º</li>
                            <li>‚Ä¢ –°—Ü–µ–Ω–∞—Ä–Ω–∞—è –ø–æ–¥–∞—á–∞</li>
                            <li>‚Ä¢ –§—Ä–∏–ª–∞–Ω—Å –∏ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</li>
                        </ul>
                        <div class="mt-4 flex items-center justify-between">
                            <div class="text-xl font-semibold font-['Montserrat']">–æ—Ç 29 990 ‚ÇΩ</div>
                            <button class="px-4 py-2 rounded-lg bg-[#00F5A0] text-black font-['Montserrat'] hover:bg-[#00e390] transition">
                                –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Kit Section -->
        <section class="py-12">
            <div class="max-w-6xl mx-auto px-4">
                <h3 class="text-xl font-semibold font-['Playfair Display']">–í –∫–æ–º–ø–ª–µ–∫—Ç–µ</h3>
                <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="p-3 rounded-lg bg-white bg-opacity-[0.02] text-center border border-gray-800">
                        <div class="font-semibold font-['Montserrat'] text-base">–®–∞–±–ª–æ–Ω—ã</div>
                    </div>
                    <div class="p-3 rounded-lg bg-white bg-opacity-[0.02] text-center border border-gray-800">
                        <div class="font-semibold font-['Montserrat'] text-base">–ü—Ä–µ—Å–µ—Ç—ã</div>
                    </div>
                    <div class="p-3 rounded-lg bg-white bg-opacity-[0.02] text-center border border-gray-800">
                        <div class="font-semibold font-['Montserrat'] text-base">–ß–µ–∫-–ª–∏—Å—Ç—ã</div>
                    </div>
                    <div class="p-3 rounded-lg bg-white bg-opacity-[0.02] text-center border border-gray-800">
                        <div class="font-semibold font-['Montserrat'] text-base">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ —á–∞—Ç–µ</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Teacher Section -->
        <section class="py-12">
            <div class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row gap-6 items-center">
                <img src="https://placehold.co/144x144/1a1a1a/cccccc?text=Teacher" alt="–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å" class="w-36 h-36 rounded-full object-cover border border-gray-800" />
                <div>
                    <h4 class="text-lg font-semibold font-['Playfair Display']">–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ ‚Äî lead editor</h4>
                    <p class="text-sm text-gray-400 mt-2 font-['Montserrat']">–ë–æ–ª–µ–µ 200 –º–æ–Ω—Ç–∞–∂–µ–π –¥–ª—è –±—Ä–µ–Ω–¥–æ–≤ –∏ —Å—Ç—É–¥–∏–π ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –Ω–∞ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è—Ö –∏ YouTube-–∫–∞–Ω–∞–ª–∞—Ö.</p>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="py-12">
            <div class="max-w-6xl mx-auto px-4">
                <h3 class="text-xl font-semibold font-['Playfair Display']">–û—Ç–∑—ã–≤—ã</h3>
                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <blockquote class="p-4 rounded-lg bg-white bg-opacity-[0.01] bg-gradient-to-tr from-transparent to-gray-900">
                        <p class="text-sm font-['Montserrat']">‚Äú–°—É–ø–µ—Ä –∏–Ω—Ç–µ–Ω—Å–∏–≤ ‚Äî —É–∂–µ –≤–∑—è–ª–∞ –ø–µ—Ä–≤—ã–µ –∑–∞–∫–∞–∑—ã.‚Äù</p>
                        <footer class="mt-2 text-xs text-gray-400 font-['Montserrat']">‚Äî –ê–Ω—è</footer>
                    </blockquote>
                    <blockquote class="p-4 rounded-lg bg-white bg-opacity-[0.01] bg-gradient-to-tr from-transparent to-gray-900">
                        <p class="text-sm font-['Montserrat']">‚Äú–ö—Ä—É—Ç–∞—è —Ñ–∏–¥–±–µ–∫-—Å–∏—Å—Ç–µ–º–∞. –û—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ.‚Äù</p>
                        <footer class="mt-2 text-xs text-gray-400 font-['Montserrat']">‚Äî –ú–∏—Ö–∞–∏–ª</footer>
                    </blockquote>
                    <blockquote class="p-4 rounded-lg bg-white bg-opacity-[0.01] bg-gradient-to-tr from-transparent to-gray-900">
                        <p class="text-sm font-['Montserrat']">‚Äú–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ ‚Äî —Ç–æ–ø.‚Äù</p>
                        <footer class="mt-2 text-xs text-gray-400 font-['Montserrat']">‚Äî –ù–∞—Ç–∞–ª—å—è</footer>
                    </blockquote>
                </div>
            </div>
        </section>

        <!-- Form Section -->
        <section id="form-main" class="py-12">
            <div class="max-w-3xl mx-auto px-4">
                <div class="glass-card p-6 rounded-2xl">
                    <h3 class="text-xl font-semibold font-['Playfair Display']">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</h3>
                    <p class="text-sm text-gray-400 mt-1 font-['Montserrat']">–û—Å—Ç–∞–≤—å –∫–æ–Ω—Ç–∞–∫—Ç ‚Äî –Ω–∞–ø–∏—à–µ–º –¥–µ—Ç–∞–ª–∏ –∏ –¥–∞—Ç—ã —Å—Ç–∞—Ä—Ç–∞.</p>
                    <form id="contact-form" class="mt-4 grid grid-cols-1 gap-3">
                        <label class="flex flex-col text-sm font-['Montserrat']">
                            –ò–º—è*
                            <input name="name" class="mt-1 p-3 rounded-lg bg-white bg-opacity-[0.02]" required />
                            <span id="name-error" class="text-xs text-red-400 hidden"></span>
                        </label>
                        <label class="flex flex-col text-sm font-['Montserrat']">
                            Email*
                            <input name="email" type="email" class="mt-1 p-3 rounded-lg bg-white bg-opacity-[0.02]" required />
                            <span id="email-error" class="text-xs text-red-400 hidden"></span>
                        </label>
                        <label class="flex flex-col text-sm font-['Montserrat']">
                            –¢–µ–ª–µ—Ñ–æ–Ω
                            <input name="phone" type="tel" class="mt-1 p-3 rounded-lg bg-white bg-opacity-[0.02]" />
                        </label>
                        <fieldset class="flex items-center gap-4 text-sm font-['Montserrat']">
                            <legend class="sr-only">–£—Ä–æ–≤–µ–Ω—å</legend>
                            <label class="flex items-center gap-2">
                                <input type="radio" name="level" value="–ë–ê–ó–ê" checked /> –ë–ê–ó–ê
                            </label>
                            <label class="flex items-center gap-2">
                                <input type="radio" name="level" value="–ü–†–û" /> –ü–†–û
                            </label>
                        </fieldset>
                        <label class="flex flex-col text-sm font-['Montserrat']">
                            –ö–∞–∫ —É–∑–Ω–∞–ª–∏?
                            <select name="how" class="mt-1 p-3 rounded-lg bg-white bg-opacity-[0.02]">
                                <option value="">‚Äî</option>
                                <option value="–ò–Ω—Å—Ç–∞–≥—Ä–∞–º">–ò–Ω—Å—Ç–∞–≥—Ä–∞–º</option>
                                <option value="–î—Ä—É–∑—å—è">–î—Ä—É–∑—å—è</option>
                                <option value="–†–µ–∫–ª–∞–º–∞">–†–µ–∫–ª–∞–º–∞</option>
                            </select>
                        </label>
                        <label class="text-xs mt-2 font-['Montserrat']">
                            <input type="checkbox" required /> –Ø —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                        </label>
                        <div class="mt-4 flex items-center gap-3">
                            <button type="submit" class="px-6 py-3 rounded-2xl bg-[#00F5A0] text-black font-semibold font-['Montserrat'] hover:opacity-80 transition">
                                –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                            </button>
                        </div>
                        <div id="loading-message" class="hidden text-sm text-white font-['Montserrat']">–û—Ç–ø—Ä–∞–≤–∫–∞...</div>
                        <div id="success-message" class="hidden mt-4 p-4 bg-[#00F5A0] bg-opacity-[0.08] rounded text-[#00F5A0] font-['Montserrat']">–°–ø–∞—Å–∏–±–æ ‚Äî –º—ã —Å–≤—è–∂–µ–º—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</div>
                    </form>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="py-12">
            <div class="max-w-6xl mx-auto px-4">
                <h3 class="text-xl font-semibold font-['Playfair Display']">FAQ</h3>
                <div id="accordion" class="space-y-2">
                    <div class="bg-white bg-opacity-[0.01] rounded-lg p-3">
                        <button class="accordion-header w-full text-left flex justify-between items-center">
                            <span class="font-semibold font-['Montserrat']">–ö–æ–≥–¥–∞ —Å—Ç–∞—Ä—Ç?</span>
                            <span class="font-['Montserrat']">+</span>
                        </button>
                        <div class="accordion-content mt-2 text-sm text-gray-400 font-['Montserrat'] hidden">–î–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞–±–æ—Ä–∞.</div>
                    </div>
                    <div class="bg-white bg-opacity-[0.01] rounded-lg p-3">
                        <button class="accordion-header w-full text-left flex justify-between items-center">
                            <span class="font-semibold font-['Montserrat']">–ù—É–∂–µ–Ω –ª–∏ –æ–ø—ã—Ç?</span>
                            <span class="font-['Montserrat']">+</span>
                        </button>
                        <div class="accordion-content mt-2 text-sm text-gray-400 font-['Montserrat'] hidden">–ù–µ—Ç, –±–∞–∑–æ–≤—ã–π –ø–æ—Ç–æ–∫ ‚Äî –æ—Ç –Ω—É–ª—è.</div>
                    </div>
                    <div class="bg-white bg-opacity-[0.01] rounded-lg p-3">
                        <button class="accordion-header w-full text-left flex justify-between items-center">
                            <span class="font-semibold font-['Montserrat']">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç?</span>
                            <span class="font-['Montserrat']">+</span>
                        </button>
                        <div class="accordion-content mt-2 text-sm text-gray-400 font-['Montserrat'] hidden">–î–∞ ‚Äî –ø–æ –∏—Ç–æ–≥—É –∫—É—Ä—Å–∞.</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-8 border-t border-gray-800">
            <div class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-sm text-gray-400 font-['Montserrat']">¬© 2024 MontageLab ‚Äî –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</div>
                <div class="flex items-center gap-4">
                    <a href="#" class="text-sm text-gray-400 hover:text-white transition font-['Montserrat']">IG</a>
                    <a href="#" class="text-sm text-gray-400 hover:text-white transition font-['Montserrat']">YT</a>
                    <a href="#" class="text-sm text-gray-400 hover:text-white transition font-['Montserrat']">Visa / MC</a>
                </div>
                <a href="#" class="text-sm text-gray-400 hover:text-white transition font-['Montserrat']">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
            </div>
        </footer>
    </main>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('scrolling-abstraction');
            const ctx = canvas.getContext('2d');
            let lines = [];
            let scrollY = 0;

            const resizeCanvas = () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight * 2;
            };

            const initLines = () => {
                lines = [];
                const numLines = 20;
                for (let i = 0; i < numLines; i++) {
                    lines.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        length: Math.random() * 100 + 50,
                        angle: Math.random() * Math.PI * 2,
                        speed: Math.random() * 0.5 + 0.1,
                        opacity: Math.random() * 0.5 + 0.5,
                        color: `hsl(${Math.random() * 360}, 100%, 70%)`
                    });
                }
            };

            const animate = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                const scrollSpeed = scrollY * 0.001;
                lines.forEach(line => {
                    line.x += Math.cos(line.angle) * line.speed + scrollSpeed;
                    line.y += Math.sin(line.angle) * line.speed;
                    if (line.x > canvas.width + line.length) line.x = -line.length;
                    if (line.y > canvas.height + line.length) line.y = -line.length;
                    if (line.x < -line.length) line.x = canvas.width + line.length;
                    if (line.y < -line.length) line.y = canvas.height + line.length;

                    ctx.beginPath();
                    ctx.moveTo(line.x, line.y);
                    ctx.lineTo(line.x + Math.cos(line.angle) * line.length, line.y + Math.sin(line.angle) * line.length);
                    ctx.strokeStyle = line.color;
                    ctx.lineWidth = 1;
                    ctx.globalAlpha = line.opacity;
                    ctx.stroke();
                });
                requestAnimationFrame(animate);
            };

            window.addEventListener('resize', resizeCanvas);
            window.addEventListener('scroll', () => { scrollY = window.scrollY; });
            resizeCanvas();
            initLines();
            animate();

            // Firebase setup
            const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);

            const signIn = async () => {
                try {
                    if (typeof __initial_auth_token !== 'undefined') {
                        await signInWithCustomToken(auth, __initial_auth_token);
                    } else {
                        await signInAnonymously(auth);
                    }
                    console.log("Firebase auth successful.");
                } catch (error) {
                    console.error("Firebase Auth Error:", error);
                }
            };
            signIn();
            
            // Form submission logic
            const form = document.getElementById('contact-form');
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formButton = form.querySelector('button[type="submit"]');
                const loadingMessage = document.getElementById('loading-message');
                const successMessage = document.getElementById('success-message');
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                let hasError = false;
                if (!data.name.trim()) {
                    document.getElementById('name-error').textContent = '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ';
                    document.getElementById('name-error').classList.remove('hidden');
                    hasError = true;
                } else {
                    document.getElementById('name-error').classList.add('hidden');
                }
                if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(data.email)) {
                    document.getElementById('email-error').textContent = '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email';
                    document.getElementById('email-error').classList.remove('hidden');
                    hasError = true;
                } else {
                    document.getElementById('email-error').classList.add('hidden');
                }

                if (hasError) return;

                formButton.disabled = true;
                loadingMessage.classList.remove('hidden');
                
                try {
                    const userId = auth.currentUser?.uid || 'anonymous';
                    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                    
                    const submissionsRef = collection(db, 'artifacts', appId, 'public', 'data', 'submissions');
                    await addDoc(submissionsRef, {
                        ...data,
                        userId: userId,
                        timestamp: serverTimestamp()
                    });
                    
                    loadingMessage.classList.add('hidden');
                    successMessage.classList.remove('hidden');
                    formButton.disabled = false;
                    form.reset();
                    
                } catch (error) {
                    console.error("Error writing document: ", error);
                    loadingMessage.classList.add('hidden');
                    formButton.disabled = false;
                }
            });

            // Accordion logic
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const sign = header.querySelector('span:last-child');
                    
                    if (content.classList.contains('hidden')) {
                        content.classList.remove('hidden');
                        sign.textContent = '‚àí';
                    } else {
                        content.classList.add('hidden');
                        sign.textContent = '+';
                    }
                });
            });
        });
    </script>
</body>
</html>
